$schema: 'https://moonrepo.dev/schemas/project.json'
language: javascript

fileGroups:
  crate:
    - '/crates/critters-rs/**/*.rs'
    - '/crates/critters-rs/Cargo.toml'
    - '/Cargo.lock'
  build:
    - 'build.ts'
    - 'package.json'

tasks:
  dev:
    command: 'pnpm nodemon --watch "../../crates/critters-rs" --ext ts,rs,json,toml --exec tsx build.ts'
    local: true
  build:
    command: tsx build.ts
    inputs:
      - '@group(crate)'
      - '@group(build)'
    outputs:
      - 'dist'